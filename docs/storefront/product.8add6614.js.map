{"version":3,"sources":["product-details/services/ProductPageApiService.ts","common/types.ts","../../../libs/utils/design-settings/design-settings.ts","../../../libs/utils/design-settings/types.ts","../../../libs/utils/design-settings/index.ts","../../../libs/utils/index.ts","product-details/preorderStyle.ts","product-details/PreorderButton.ts","common/PreorderSpinner.ts","product-details/ProductForm.ts","product-details/ProductPageController.ts","product-details/product.ts"],"names":[],"mappings":";;;;;;AEEO,AEFP,ADEO,AEFP,AJYA,AKZA,IJEa,ACAA,AFUD,AKZN,KAAK,GAAG,CJEQ,ECAE,CDAC,ECAE,AFU3B,CETI,i4FGHJ;AJGI,ACAE,AKCN,ADHA,AEDA,ACAA,ACCA,AXCA,EECI,ACAE,EKCN,CNDO,EAAE,ACAE,EDDc,ACCZ,MGsFE,IErFf,GAAA,ELDI,UKCJ;ANAI,AEJJ,ADG8B,AEH9B,AGQI,ENJA,ACD0B,GDCvB,EAAE,ACD0B,EAAE,EKKjC,eAAA,CAAoB,QAApB,EAA2D,IAA3D,EAA8F,OAA9F,EAA6H;ANNxG,AEFzB,ADGI,AEHJ,AGQ+D,API/D,AMVA,AEDA,ACAA,ACEA,AXEA,CEHO,ACAoB,AFU3B,EERI,KKI2D,GPInD,COJmD,KAAA,KAAA,CAAA,EAAA,API/D,EAA0B;AGZ1B,ADIM,AEJN,AGQ+D,APK3D,EETE,AFSF,IOL2D,CLJpD,EAAE,CKIkD,GAAA,GLJ3D,AFSA,CAAA,SAAA,CAAA,GAAA,COL2D,QPK3D;AGbJ,ADIsB,AEJtB,AGQwF,APMpF,AMXJ,AEGA,ACJA,ACKA,AXIA,EGPsB,AFUlB,KEVuB,EAAE,OFUzB,CAAA,WAAA,CAAA,GAAA,WAAA;ACPG,AEPP,ADII,AEJJ,AJeI,CEbuB,CFavB,CEVA,CDES,YAAY,ADQrB,CAAA,ECRwB,QDQxB,CCRS,ADQT,GAAA,SCRwB,CAAC,ADQzB,ICRwB,EAAa;AACrC,AERJ,ADKM,AELN,AGQkG,APQjG,AQTD,ACJA,ACKA,AXIA,CCAA,CEPM,CFOM,GCJJ,CCHG,CKGuF,CLHrF,EDGA,GAAG,CMAkF,ELH9F,AFOsB,GCJJ,AMA4E,CNA3E,IAAD,AMA4E,CNA9F,AMA8F,EAAA,mBPItF,cAAc,GAAA,EAAA,CAA1B;AGZA,ADKuB,AELvB,AGQkG,ELH3E,IKG2E,CLHtE,EAAE,IKGoE,GAAA,qBAAA;ANC9F,AETJ,ADKI,AELJ,AGQiI,ADFjI,CJJ2B,EAIvB,CIAJ,ELGQ,KAAK,CAAC,KAAD,CAAT,AKHJ,ELGsB,CKHtB,YAAA;ALIQ,AEVR,ADMM,AENN,AEiBI,EJXE,EDIE,GCJG,EDIE,ACJA,EIWT,CLPY,MCJZ,GDIqB,CAAC,GAAlB,AKOJ,CAAoB,QAApB,EAA2D,IAA3D,EAA8F,OAA9F,EAA6H;ALN5H,ACLmB,AKEA,ADSuC,EJXvC,CDGpB,ICHyB,CIWkC,CLNpD,ACLoB,AKEP,GDSuC,CLNhD,IMHS,ADSuC,CLN3C,EMHI,CNGD,CKMwC,CAAA,EAAA,GCTvC,ENGQ,CAAC,GAAtB,EAA2B;AAC9B,AEXR,ADKI,AKE2D,ADSA,CJfpC,EAKvB,CDKI,EKKuD,GLLlD,AMJkD,CDSA,ELL/C,CMJ+C,ADSA,GCTA,IAAA,CNItC,CAAC,GAAlB,MKKuD;ALJ1D,ACNC,AKC4F,ADSV,EJVlF,CDIK,ICJA,EDMA,ACNE,AKCqF,INKnF,GCNX,AKC8F,ENK9E,CML8E,ENK3E,KML2E,INKlE,CAAC,GAAtB,EAA2B;AAC9B,AEbR,ADMsB,AKDlB,ELCkB,EDOd,GCPmB,EDOd,ACPgB,AKDzB,GNQY,IMRZ,GAAmB,ENQE,CAAC,EMRtB,CNQI;AACH,AEdL,ADMI,AIU8F,CJfvE,EAMvB,KIS8F,OAAA,KAAA,KAAA,CAAA,EAAA;AHhBlG,ADOM,AK2BM,ADlBsF,EJT5F,IIS4F,CJTvF,EAAE,AK2BD,IDlBsF,GAAA,EJT9F,KK2BQ,GAAiB,WDlBqE,CCkBrE;ANlBzB,AEhBJ,ADOwB,AK4BhB,ADnByH,EJTzG,KAAK,EDSlB,ACToB,IK4BvB,CNnBQ,CAAC,QAAN,EAAP,sgBMmBI;ANlBP,AEjBD,ADOI,AKiCY,CNlCT,ACLoB,CAApB,GKiCK;AJlCZ,AGgBwB,SAAA,QAAA,GAAA,QAAA;AHhBxB,ADUO,AKFC,ADQuD,IJNlD,KAAK,AKFL,ADQkD,GJNzC,CIMyC,ECRvD,CDQuD,IAAA,GJNxD;ACVP,AISQ,ADO0F,SCPrF,ADOqF,ICP1F,GDO0F,GAAA,OAAA;ALG3F,AEnBP,AD2CA,AKjCK,ADGQ,ILMA,ACwBP,IAAI,CI9BG,EJ8BA,CAAC,ODxBc,GAAG,ACwBlB,EAAa,CI9Bb,GAAmB,GLMnB,GCwBA,CAAb,OI9Ba,ILMkB,CAAC,QAAD,EAAmC;AAC9D,AC0BJ,IAAM,ED1BE,CAAC,QAAL,AC0Ba,ED1BE,CC0BC,CAAC,QAAD,EAAW,OAAX,EAAoB,SAApB,CAApB;ADzBQ,AC4BR,AKrCI,AD0FQ,EC1FR,ELqCE,KIqDM,ELjFG,EAAP,GC4BU,CKrCd,CAAA,CLqCiB,CAAC,OKrClB,CAAA,CLqCiB,CIqDT,CJrDqB,EIqDG,CC1FhC,GAAA,GLqCiB,CAArB,EIsDQ,MC3FJ,ID0FgC,EAE5B,aAF4B,EAG5B,WAH4B,EAI5B,UAJ4B,EAK5B,qBAL4B,EAM5B,gBAN4B,EAMH;ALtF5B,AMTG,ADiGA,QCjGM,KDiGN,MCjGiB,GAAG,QAAQ,CAAC,ADiGd,aCjGK,CAAuB,ADiGd,CAAC,ICjGV,CAApB,ODiGA,GAA0C,GAA1C,GAA8C,cAAc,CAAC,YAA7D,GAAyE,UAAzE,GAAoF,cAAc,CAAC,YAAnG,GAA+G,kNAA/G,GAMyB,WANzB,GAMoC,qDANpC,GAQkB,UARlB,GAQ4B,uJAR5B,GAYyB,UAZzB,GAYmC,qDAZnC,GAckB,UAdlB,GAc4B,4IAd5B,GAkBc,aAlBd,GAkB2B,4IAlB3B,GAsBkB,qBAtBlB,GAsBuC,kDAtBvC;AC/FA,ADuHW,ICvHX,CDuFI,UCvFO,CAAC,kBAAZ,CAA+B,WAA/B,EAA4C,KAAK,cAAL,EAA5C;ANUA,AMRA,MNQA,GMRK,ENQL,GAAA,EMRA,GAAe,GNQf,CAAA,KAAA,EMR0B,CAAC,iBAA3B;ANQA,AMNH,ADFG,GCLJ,GNcI,gBAAA,GAAA,QAAA,AKTgB,CLShB,gBADA,KKRA;ALQA,AKPA,MLSA,GKTK,MAAL,GLSA,GAAA,QAAA,CAAA,YAFA;AAAA,AMJJ,ADFI,ECEJ,INOI,GKTK,IAAL,ILSA,AMPJ,CAAA,ENOI,OMPJ,CNOI,AMPJ,CNOI,GMPJ,GAAA,KNII,OMJJ;ANII,AMHA,ADFH,MLSG,GMPK,MNOL,CMPA,CAAa,CNOb,IMPA,CAAmB,GNOnB,CAAA,GMPA,GAA6B,GNG7B,GMHA;ANGA,AMFA,MNOA,GMPK,OAAL,CNOA,EMPe,CNOf,IMPA,INOA,CAAA,WALA;AAAA,AMDH,ADFD,EAAA,CCDA,GNUI,UKTJ,CAAA,ILSI,GAAA,EKTJ,CAAA,KLSI,CAAA,AKTJ,GAAA,YLGI,AKHJ;ALGI,AKFA,MLSA,EKTM,QLSN,GAAA,AKTiB,GAAG,KLSpB,CAAA,EKT4B,CAAC,OLE7B,MKFoB,CAAuB,KAAvB,CAApB;ALEA,AMCJ,EAAA,INOI,WMPJ,CAAA,CNOI,GAAA,KMPJ,CAAA,ENOI,CAAA,IMPJ,GAAA,MNDI,IMCI,KAAR,EAA6B;ANDzB,AMEA,ADFM,MLSN,EKTM,CCED,CDFC,GAAA,GCEN,CAAa,CNOb,AKTM,GLSN,CMPA,CAAmB,IDFb,ELSN,AKTM,CLSN,AMPA,GAA6B,MAA7B,GNFA;AAYJ,AKZU,MLYN,EKZQ,ILYF,GAAG,EAAb,EKZY,GAAA,EAAA,CAAA,WAAF;ALgBV,AMbI,ADHM,ELgBV,MAAM,AMbE,ADHiB,CLgBlB,IAAP,AMbI,CNaQ,CMbG,GDHU,GAAA,CLgBzB,CKhByB,CLgBH,AKhBG,OLgBzB,CAA8B,EKhBpB,QLgBqB,YAAD,EAAa;AACvC,AMbI,ADJE,QLiBA,AKjB2B,GLiBxB,AMbA,GNaG,IMbR,CAAa,KAAb,CAAmB,CNaC,CAAC,EKjBQ,CCI7B,EDJ6B,CCIF,CNanB,AKjBqB,CLiBA,AKjBA,GLiBrB,AMbR,ENakC,GAA1B,CAAZ,YKjBM;ALkBN,AMbC,QNaG,KAAK,GAAG,QAAQ,CAAC,YAAD,CAApB;AKhBA,IAAA,WAAW,CAAC,kBAAZ,CACI,WADJ,EAEI,KAAK,qBAAL,CACI,KAAK,IADT,EAEI,KAAK,OAFT,EAGI,WAHJ,EAII,UAJJ,EAKI,qBALJ,EAMI,KAAK,gBANT,CAFJ;ALiBA,AMbA,ADOA,QLMI,CMbC,ADOA,ELME,KAAK,AMbZ,ADOA,GCPe,ADOA,ICPf,INaA,EAAyB,CKNC,CAAC,iBAA3B;ALOI,AMbP,ADSG,GCfJ,GNmBQ,GKJC,ELII,GAAG,QKJZ,GAAqB,CLIG,CAAC,GKJC,KLIO,CAAC,CKJb,CAAa,OLIT,CAAmB,KAAnB,AKJJ,CLI6B,AKJF,CLIvB,EAA4B,CAAC,CAA7B,CAAD,CAAZ,GAAgD,IAAxD,WKJiB,CAArB;ALKC,AKJD,SAAK,YAAL,GAAoB,KAAK,OAAL,CAAa,aAAb,CAA2B,0BAA3B,CAApB;ACDR,ADEQ,SCFR,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CAAC,KD3DT,GAAkC,GC2D9B,CD3DJ,AC2DqB,iBAAjB;ADvDF,ACwDD,AVtEL,KUkE4B,CAIrB,EDxDG,CTdV,CUkE4B,CAIhB,IDxDK,ACoDW,CAAxB,EDpDgB,IAAd,CTdN;AAHA,CAAA,EAAA;AUWQ;ADOF,ACNE,SAAK,EDMgB,CCNrB,GDMqB,ACNV,EDMU,CCNP,CAAC,CDMM,GCNV,CAAS,IDMC,ACNV,CDMU,CCNK,oBDMK,CCNgB,CAAC,IAArC,CDMU,CAAkB,ACNe,IDMjC,CAAA,ACNV,CAAX,CDM2C,EAAA,GAAA,EAAA,CAAA,IAAA,EAA7C,EAA6C,CAAA,EAAA,CAAA,IAA7C,EAA6C,EAAA,GAAA,EAAA,CAAA,IAAA,EAA7C,EAA+C;AAA1C,ACLH,SAAK,GDKI,CCLT,GAAY,IDKK,CCLjB,CAAkB,CDKD,EAAA,CAAA,KAAd,CCLgB,KAAD,EAAM;ADMtB,ACN2B,AVRrC,IAAA,IScU,KCN2B,EDMpB,GAAG,ACNqB,CAAC,GAAL,CAAS,EVR9C,CSc4B,CAAC,CTd7B,UUQqC,EDMjB,ACN2C,AVR/D,CSc4D,ICNvB,CAAA,GDMjB,CAAV;ACN2D,AVPjE,KUOI,MVPJ,qBAAA,CAAsB,GAAtB,EAA4C,WAA5C,EAAoE;ASc9D,ACNL,AVRqB,SAAA,GScZ,ATdY,GAAA,GAAA,CSchB,EAAa;AACX,ATfoC,SAAA,MSe/B,KTf+B,ESepC,CTfoC,ESerB,OAAf,ETfoC;ASgBpC,ACNF,AVTF,EUSE,OVTG,GAAL,GAAW,GAAG,CAAC,IUSb,AVTS,CUST,AVTkB,IAAT,EAAe,GUSxB,CAAA,IAAA,GAAN,UVTmD,CAAC,CUSpD,GVTe,EAA2C,KAA3C,CAAX;ASgBG,ATfN;ASgBE;ATdG,EAAA,qBAAA,CAAA,SAAA,CAAA,WAAA,GAAN,YAAA;;;;;;AACQ,YAAA,MAAM,GAAG,IAAT;;AUMJ,AVJA,gBACI,CUGC,WAAL,GAAmB,IAAI,oBVFnB,IUEe,EAAnB,0CVHI,IAEA,kDAHJ,EAIE;AACE,cAAA,GUCA,GVDM,EUCD,CVDI,MAAM,CAAC,GUChB,CAAiB,IVDR,CAAgB,IUCzB,IVDS,CAAyB,EUClC,CAA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+EH,OT/EG,OS+ER,AT/Ee,CS+EK,CT/EH,MS+EjB,CAA4B,KAA5B,CAAkC,KAAlC,GAA0C,KAAK,kBAA/C;AACH,ACvDD,AVxBgB,iBUwBX,GVxBW,QUwBhB,AVxBwB,CUwBP,CVxBS,UUwB1B;AVvBoB,sBAAA,MAAM,EAAE;ASgF5B,ACvDA,AVxBwB,SS+EnB,OCtDD,CAAA,CAAA,EAAA,EDsDJ,CAAmB,ACtDf,CVzBoB,IUyBf,CVzBoB,CS+E7B,CT/E+B,ES+EF,GCtDzB,EDsDJ,EThF4B,EU0BX,IAAb,IAAa,EAAA,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAa,EAAA,CAAE,OAAF,CAAU,eAAvB,MAA2C,sBAAe,SAD9D,EAEE;ADsDL,ACrDO,AV1BoB,GSyD5B,gBC/Ba,KV1Be,MU0BpB,CAAiB,SV1BmB,EAAE,SU0BtC,AV5BwB;AU6BxB,AV1BoB,mBU0Bf,KV1Be,MU0BpB,CAAiB,KV1Be,EAAE,SAHV,KU6BxB;ADsDF,ACrDD,AV1BuB,ES+EtB,WAAA,AC1DF,CD0DE,KCrDK,IDqDL,CAAA,AT/EsB,WS+EtB,AT/EiC,EAAE,CS+EzC,QTnFgC,ISmFhC;ACpDQ,AV1BoB,mBU0Bf,KV1Be,MU0BpB,CAAiB,EV1BY,EAAE,MALP,OU+BxB;AACH,AV1BuB,wBAAA,WAAW,EAAE,QANT;AAOJ,wBAAA,eAAe,EAAE,MAPb;AAQJ,wBAAA,UAAU,EAAE,QARR;ASoF5B,AT3EwB,mBS2ExB,CAAA,CAAA,EAAM,CT3EkB,aAAa,EAAE,GS2EvC,CAAA,CTpF4B;AAUJ,wBAAA,YAAY,EAAE,KAVV;AAWJ,wBAAA,WAAW,EAAE,MAXT;ASoF5B,ACnDH,AVrB2B,GUEtB,SDsEF,EAAA,CAAA,IAAA,KTxEwB,cAAc,EAAE,MAZZ;AAaJ,wBAAA,aAAa,EAAE,MAbX;ASqF5B,AClDE,AVrBsB,EUqBtB,eDkDG,MClDH,CAAA,AVrBsB,SUqBtB,CDkDF,AClDE,EVrBkC,EAAE,OUqBpC,GAAN,UAAkB,UAAlB,EAAqC;ADmDjC,ATtF4B,iBSsFvB,MTvFqB,QSuF1B,CAAoB,IAApB;AAIA,AT1EoB,iBS0Ef,KT1Ee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","file":"product.8add6614.js","sourceRoot":"../../storefront/scripts/src","sourcesContent":["import { link } from 'fs';\nimport pRetry, { FailedAttemptError } from 'p-retry';\nimport { sleep } from '~../../../libs/utils/async';\nimport { PreorderApi, PreorderSettingsJson } from '~common/types';\nimport { IS_MOCK } from '~index';\nimport {\n    isPreviewProductsPage,\n    isProductDetailsFromFrontpagePage,\n    isProductDetailsPage,\n    LogFn,\n} from '~utils/common/common';\nimport { fetchJson } from '~utils/common/fetch';\nimport { isProductDetailsFromCollectionPage } from '../../utils/common/common';\n\nexport class ProductApiJson {\n    id: string = '';\n    variants: { id: number, option1?: string }[] = [];\n}\n\nexport class ProductPageApiService {\n    constructor(protected log: LogFn, protected preorderApi: PreorderApi) {\n        this.log = log.bind(null, ProductPageApiService.name, ':: ');\n    }\n\n    async loadProduct() {\n        let handle = null;\n\n        if (\n            isProductDetailsPage() ||\n            isProductDetailsFromFrontpagePage() ||\n            isProductDetailsFromCollectionPage()\n        ) {\n            handle = window.location.pathname.split('/').pop();\n        }\n        if (isPreviewProductsPage()) {\n            const linkEl = document.querySelector('link[rel=\"canonical\"]');\n            handle = linkEl!.getAttribute('href')!.split('/').pop();\n        }\n\n        const product = await fetchJson<ProductApiJson>(\n            '/products/' + handle! + '.js',\n            {\n                retries: 3,\n            }\n        );\n        this.log('loadProduct:: product', product);\n\n        return product;\n    }\n\n    async loadSettings(shop_id: string, variant_id: string) {\n        const options: pRetry.Options = {\n            onFailedAttempt: async (error: FailedAttemptError) => {\n                await Promise.resolve(\n                    this.log('AjaxApi:: settings error', error)\n                );\n            },\n            retries: 3,\n        };\n\n        const settings = await fetchJson<PreorderSettingsJson>(\n            `${this.preorderApi.url\n            }/storefront/products/settings?shop=${encodeURIComponent(\n                shop_id\n            )}&variant_id=${variant_id}`,\n            options\n        );\n\n        this.log('loadSettings:: settings', settings);\n        return settings;\n    }\n}\n\nexport class MockProductPageApiService extends ProductPageApiService {\n    constructor(log: LogFn, preorderApi: PreorderApi) {\n        super(log, preorderApi);\n        this.log = log.bind(null, MockProductPageApiService.name, ':: ');\n    }\n\n    async loadSettings(shop_id: string, variant_id: string) {\n        const options: pRetry.Options = {\n            onFailedAttempt: async (error: FailedAttemptError) => {\n                await Promise.resolve(\n                    this.log('AjaxApi:: settings error', error)\n                );\n            },\n            retries: 3,\n        };\n\n        await sleep(800);\n\n        const data = {\n            button: {\n                design_settings: {\n                    current: {\n                        preorder: {\n                            button: {\n                                color: '#D3E1F1',\n                                background_color: '#182CD9',\n                                border_color: '#182CD9',\n                                font_family: 'inherit',\n                                font_size: '18px',\n                                font_weight: 'normal',\n                                text_decoration: 'none',\n                                font_style: 'normal',\n                                border_radius: '3px',\n                                border_width: '1px',\n                                padding_top: '12px',\n                                padding_bottom: '12px',\n                                padding_right: '30px',\n                                padding_left: '30px',\n                            },\n                            hover: {\n                                color: '#D3E1F1',\n                                background_color: '#4FA7EC',\n                                border_color: '#4FA7EC',\n                                font_family: 'inherit',\n                                font_size: '18px',\n                                font_weight: 'normal',\n                                text_decoration: 'none',\n                                font_style: 'normal',\n                                border_radius: '3px',\n                                border_width: '1px',\n                                padding_top: '12px',\n                                padding_bottom: '12px',\n                                padding_right: '30px',\n                                padding_left: '30px',\n                            },\n                            message: {\n                                color: '#898989',\n                                background_color: 'initial',\n                                border_color: 'initial',\n                                font_family: 'inherit',\n                                font_size: '14px',\n                                font_weight: 'normal',\n                                text_decoration: 'none',\n                                font_style: 'normal',\n                                border_radius: '0',\n                                border_width: '0',\n                                padding_top: '0',\n                                padding_bottom: '0',\n                                padding_right: '0',\n                                padding_left: '0',\n                            },\n                        },\n                        checkout: {\n                            button: {\n                                color: '#D3E1F1',\n                                background_color: '#182CD9',\n                                border_color: '#182CD9',\n                                font_family: 'inherit',\n                                font_size: '18px',\n                                font_weight: 'normal',\n                                text_decoration: 'none',\n                                font_style: 'normal',\n                                border_radius: '3px',\n                                border_width: '1px',\n                                padding_top: '12px',\n                                padding_bottom: '12px',\n                                padding_right: '30px',\n                                padding_left: '30px',\n                            },\n                            hover: {\n                                color: '#D3E1F1',\n                                background_color: '#ec754fff',\n                                border_color: '#4FA7EC',\n                                font_family: 'inherit',\n                                font_size: '18px',\n                                font_weight: 'bold',\n                                text_decoration: 'underline',\n                                font_style: 'italic',\n                                border_radius: '3px',\n                                border_width: '1px',\n                                padding_top: '12px',\n                                padding_bottom: '12px',\n                                padding_right: '30px',\n                                padding_left: '30px',\n                            },\n                            message: {\n                                color: '#898989',\n                                background_color: 'initial',\n                                border_color: 'initial',\n                                font_family: 'inherit',\n                                font_size: '14px',\n                                font_weight: 'normal',\n                                text_decoration: 'none',\n                                font_style: 'normal',\n                                border_radius: '0',\n                                border_width: '0',\n                                padding_top: '0',\n                                padding_bottom: '0',\n                                padding_right: '0',\n                                padding_left: '0',\n                            },\n                        },\n                    },\n                    default: {\n                        preorder: {\n                            button: {\n                                color: '#D3E1F1',\n                                background_color: '#182CD9',\n                                border_color: '#182CD9',\n                                font_family: 'inherit',\n                                font_size: '18px',\n                                font_weight: 'normal',\n                                text_decoration: 'none',\n                                font_style: 'normal',\n                                border_radius: '3px',\n                                border_width: '1px',\n                                padding_top: '12px',\n                                padding_bottom: '12px',\n                                padding_right: '30px',\n                                padding_left: '30px',\n                            },\n                            hover: {\n                                color: '#D3E1F1',\n                                background_color: '#4FA7EC',\n                                border_color: '#4FA7EC',\n                                font_family: 'inherit',\n                                font_size: '18px',\n                                font_weight: 'normal',\n                                text_decoration: 'none',\n                                font_style: 'normal',\n                                border_radius: '3px',\n                                border_width: '1px',\n                                padding_top: '12px',\n                                padding_bottom: '12px',\n                                padding_right: '30px',\n                                padding_left: '30px',\n                            },\n                            message: {\n                                color: '#898989',\n                                background_color: 'initial',\n                                border_color: 'initial',\n                                font_family: 'inherit',\n                                font_size: '14px',\n                                font_weight: 'normal',\n                                text_decoration: 'none',\n                                font_style: 'normal',\n                                border_radius: '0',\n                                border_width: '0',\n                                padding_top: '0',\n                                padding_bottom: '0',\n                                padding_right: '0',\n                                padding_left: '0',\n                            },\n                        },\n                        checkout: {\n                            button: {\n                                color: '#D3E1F1',\n                                background_color: '#182CD9',\n                                border_color: '#182CD9',\n                                font_family: 'inherit',\n                                font_size: '18px',\n                                font_weight: 'normal',\n                                text_decoration: 'none',\n                                font_style: 'normal',\n                                border_radius: '3px',\n                                border_width: '1px',\n                                padding_top: '12px',\n                                padding_bottom: '12px',\n                                padding_right: '30px',\n                                padding_left: '30px',\n                            },\n                            hover: {\n                                color: '#D3E1F1',\n                                background_color: '#4FA7EC',\n                                border_color: '#4FA7EC',\n                                font_family: 'inherit',\n                                font_size: '18px',\n                                font_weight: 'normal',\n                                text_decoration: 'none',\n                                font_style: 'normal',\n                                border_radius: '3px',\n                                border_width: '1px',\n                                padding_top: '12px',\n                                padding_bottom: '12px',\n                                padding_right: '30px',\n                                padding_left: '30px',\n                            },\n                            message: {\n                                color: '#898989',\n                                background_color: 'initial',\n                                border_color: 'initial',\n                                font_family: 'inherit',\n                                font_size: '14px',\n                                font_weight: 'normal',\n                                text_decoration: 'none',\n                                font_style: 'normal',\n                                border_radius: '0',\n                                border_width: '0',\n                                padding_top: '0',\n                                padding_bottom: '0',\n                                padding_right: '0',\n                                padding_left: '0',\n                            },\n                        },\n                    },\n                },\n                text: 'Pre Order It',\n                message:\n                    'We will fulfill the order as soon as this item becomes available',\n            },\n            variant: { preorder_status: 'activated', availability_date: null },\n        } as PreorderSettingsJson;\n\n        data.button.message = ` variant ID :: ${variant_id}`;\n        const settings = await Promise.resolve(data);\n\n        this.log(\n            'loadSettings:: params --> ',\n            'shop_id: ',\n            shop_id,\n            ', variant_id: ',\n            variant_id,\n            ', response --> settings::',\n            settings\n        );\n        return settings;\n    }\n}\n","import { ButtonPartSettings, DesignSettingsDTO } from '~../../../libs/utils';\n\nexport interface PreorderApi {\n    url: string;\n}\n\nexport interface ButtonSettings {\n    message: string;\n    text: string;\n    design_settings: ButtonPartSettings;\n}\n\nexport enum PreorderStatus {\n    Enabled = 'enabled',\n    Activated = 'activated',\n    Disabled = 'disabled',\n}\n\nexport interface PreorderSettings {\n    variant: {\n        preorder_status: PreorderStatus;\n        availability_date: string | null;\n    };\n}\n\nexport interface PreorderSettingsJson extends PreorderSettings {\n    button: Pick<ButtonSettings, 'message' | 'text'> & {\n        design_settings: DesignSettingsDTO;\n    };\n}\n\ndeclare global {\n    interface Window {\n        Shopify: { shop: string, OptionSelectors?: any };\n        __preorder_env__: {\n            REACT_APP_API_HOST: string;\n        };\n    }\n\n}\n\n","import { CommonDesignSettingsDTO } from './types';\n\nexport const fontRange = {\n    min: 10,\n    max: 50,\n} as const;\n\nexport const validateFont = (size: string) => {\n    let value = Number(size);\n    if (isNaN(value)) {\n        value = fontRange.min;\n    } else if (value < fontRange.min) {\n        value = fontRange.min;\n    } else if (value > fontRange.max) {\n        value = fontRange.max;\n    }\n\n    return value.toString();\n};\n\nexport const getStylesString = (settings?: CommonDesignSettingsDTO) => {\n    if (!settings) {\n        return '';\n    }\n\n    const {\n        color,\n        background_color,\n        border_color,\n        font_family,\n        font_size,\n        font_weight,\n        text_decoration,\n        font_style,\n        border_radius,\n        border_width,\n    } = settings;\n\n    let result = '';\n\n    type Keys = keyof typeof settings;\n\n    Object.keys(settings).forEach((keyFromState) => {\n        const key = keyFromState.replace('_', '-');\n        let value = settings[keyFromState as Keys];\n        if (key === 'font-size') {\n            value = validateFont(settings.font_size.slice(0, -2)) + 'px';\n        }\n\n        result += `${key}: ${value}; `;\n    });\n    // result += `padding: 12px 30px;`;\n    result += `border-color: ${background_color}`;\n\n    // result += `background-color: ${background_color}; `;\n    // result += `border-radius: ${background_color}; `;\n\n    return result;\n    // ` border-radius: 1px; border-color: rgba(4, 120, 205, 0.5); border-width: 1px; color: rgb(255, 255, 255); font-size: 18px; font-family: inherit; font-style: normal; font-weight: bold; text-decoration: underline;`;\n    // `background-color: rgba(122, 125, 158, 0.5); padding: 23px 30px; border-radius: 1px; border-color: rgba(4, 120, 205, 0.5); border-width: 1px; color: rgb(255, 255, 255); font-size: 18px; font-family: inherit; font-style: normal; font-weight: bold; text-decoration: underline;`;\n};\n","import { Nullable } from '@libs/common/types';\n\nexport const fontsValues = [\n    { label: 'Theme Default', value: 'inherit' },\n    { label: 'Arial', value: 'Arial, sans-serif' },\n    { label: 'Geneva', value: 'Geneva, Tahoma, sans-serif' },\n    { label: 'Georgia', value: 'Georgia, serif' },\n    { label: 'Times', value: 'Times, Times New Roman, serif' },\n    { label: 'Verdana', value: 'Verdana, sans-serif' },\n] as const;\n\nexport const fonts = (fontsValues as unknown) as {\n    label: string;\n    value: string;\n}[];\n\nexport type FontsValues = typeof fontsValues[number]['value'];\n\nexport interface BaseDesignSettingsDTO {\n    color: string;\n    background_color: string;\n    border_color: string;\n    font_family: FontsValues;\n    font_size: string;\n    font_weight: 'bold' | 'normal';\n    text_decoration: 'underline' | 'none';\n    font_style: 'italic' | 'normal';\n    border_radius: string;\n    border_width: string;\n    padding_top: string;\n    padding_bottom: string;\n    padding_right: string;\n    padding_left: string;\n}\n\ninterface AuxDesignSettingsDTO {\n    // user_id: string;\n    // created_at: string;\n    // updated_at: string;\n}\n\nexport type CommonDesignSettingsDTO = BaseDesignSettingsDTO &\n    AuxDesignSettingsDTO;\n\nconst area = ['preorder', 'checkout'] as const;\nexport type Area = typeof area[number];\n\nconst buttonParts = ['button', 'hover', 'message'] as const;\nexport type ButtonPart = typeof buttonParts[number];\n\nconst designStates = ['current', 'default'] as const;\ntype DesignStates = typeof designStates[number];\n\nexport type ButtonPartSettings = Record<ButtonPart, CommonDesignSettingsDTO>;\ntype AreaSettings = Record<Area, ButtonPartSettings>;\n\ntype DesignValuesDTO = {\n    [K in DesignStates]: AreaSettings;\n};\n\nexport interface DesignSettingsDTO extends DesignValuesDTO {\n    // user_id: string;\n    // created_at: string;\n    // updated_at: string;\n}\n\nexport interface AppDefaultSettingsDTO {\n    price?: string;\n    price_change_value: string;\n    price_type: 'specific' | 'relative_percent' | 'relative_amount' | 'same';\n    start_date: string;\n    end_date: string;\n    inventory_limit: string;\n    button_text: string;\n    button_message: string;\n\n    user_id: string;\n    created_at: string;\n    updated_at: string;\n}\n\nexport interface AppSettingsDTO {\n    design_settings: DesignSettingsDTO;\n    app_settings: AppDefaultSettingsDTO;\n}\nexport type AppSettingsParam = Nullable<\n    Omit<AppSettingsDTO, 'design_settings'> & {\n        design_settings: { current: AreaSettings | null };\n    }\n>;\n\nexport type AppSettingsInState = {\n    settings: {\n        design: DesignSettingsInState;\n        app: AppDefaultSettingsDTO | null;\n    };\n};\nexport interface DesignSettingsInState {\n    selected: Record<Area, ButtonPart>;\n    state: DesignSettingsDTO | null;\n}\n","export * from './design-settings';\nexport * from './types';\n","export * from './design-settings';\n","const style = `\n        .pre-order-button-box button {\n          cursor: pointer; }\n\n        .pre-order-button-box {\n          display: inline-block;\n          align-self: inherit;\n          text-align: center;\n          margin: 1rem 0;\n        }\n        .pre-order-button-box button {\n            width: 100%;\n            padding: 0;\n            border: none;\n            color: inherit;\n            background-color: transparent; }\n            .pre-order-button-box button .pre-order-button__self,\n            .pre-order-button-box button .pre-order-button__hover {\n              border-style: outset; }\n            .pre-order-button-box button:hover .pre-order-button__self {\n              display: none; }\n            .pre-order-button-box button:hover .pre-order-button__hover {\n              display: block; }\n            .pre-order-button-box button:hover + .pre-order-button__message {\n              display: inline-block;\n              margin-right: -100%;\n              opacity: 1;\n              height: auto;\n              padding: 7px;\n              border-width: 1px; }\n          .pre-order-button-box__hover {\n            position: relative; }\n          .pre-order-button-box .pre-order-button__message {\n            position: absolute;\n            background-color: khaki;\n            text-align: center;\n            padding: 7px;\n            border-style: solid;\n            box-sizing: content-box;\n            z-index: 999;\n            line-height: 1.6;\n            display: block;\n            overflow: hidden;\n            background-color: #f4f4f4;\n            border-radius: 10px;\n            border-color: #d7d7d7;\n            border-width: 1px;\n            opacity: 0;\n            transition: opacity 0.5s;\n            height: 0;\n            padding: 0;\n            border-width: 0; }\n          .pre-order-button-box .pre-order-button__self {\n            display: block; }\n          .pre-order-button-box .pre-order-button__hover {\n            display: none; }\n          .pre-order-button-box__top {\n            flex-direction: column-reverse;\n            align-items: center; }\n            .pre-order-button-box__top .pre-order-button__message {\n              bottom: 120%;\n              left: 50%;\n              max-width: 95%;\n              transform: translateX(-50%); }\n              \n    .pre-order-button__spinner {\n        display: flex;\n        align-content: center;\n        justify-content: center;\n    }\n              \n    .Polaris-Spinner--colorTeal svg {\n        animation: Polaris-Spinner--loading .5s linear infinite;\n        fill: var(--p-border-highlight,#47c1bf);\n    }\n    \n    .Polaris-Spinner--sizeLarge svg {\n        height: 2.4rem;\n        width: 2.4rem;\n    }\n    \n    .pre-order-button__spinner {\n        width: 100%;\n        text-align: inherit;\n    }\n    \n    @keyframes Polaris-Spinner--loading{to{transform:rotate(1turn)}}\n  `;\n\nexport default style;\n","import { string } from \"yup\";\nimport { ButtonPartSettings, getStylesString } from \"~../../../libs/utils\";\nimport { addStyleElement, logWithPrefix } from \"~utils/common/common\";\nimport preorderStyle from './preorderStyle';\nimport { statusSelector } from '../../../../src/redux/selectors/uninnstall';\n\nexport class PreorderButton {\n    element!: HTMLDivElement;\n    buttonElement!: HTMLSpanElement;\n    hoverElement!: HTMLSpanElement;\n    messageElement!: HTMLSpanElement;\n    availabilityDate: string | undefined;\n    availabilityDateElement!: HTMLDivElement;\n    private static readonly mainCssClass = 'pre-order-button-box';\n    readonly mainDisplayStyle = 'inline-block';\n\n\n    constructor(private settings?: ButtonPartSettings, private text = '{{PreOrderText}}', private message = '{{PreOrderMessage}}') {\n        addStyleElement(preorderStyle);\n        this.render();\n        this.hide();\n    }\n\n    render() {\n        const placeholder = document.createElement('div');\n\n        const { buttonStyle, hoverStyle, availabilityDateStyle } = this.getStyles();\n\n        placeholder.insertAdjacentHTML(\n            'beforeend',\n            this.getPreorderButtonHtml(\n                this.text,\n                this.message,\n                buttonStyle,\n                hoverStyle,\n                availabilityDateStyle,\n                this.availabilityDate\n            ));\n\n        this.element = placeholder.firstElementChild as HTMLDivElement;\n        // this.element.style.width = 'fit-content';\n\n        this.buttonElement = this.element.querySelector('.pre-order-button__self') as HTMLSpanElement;\n        this.hoverElement = this.element.querySelector('.pre-order-button__hover') as HTMLSpanElement;\n        this.messageElement = this.element.querySelector('.pre-order-button__message') as HTMLSpanElement;\n        this.availabilityDateElement = this.element.querySelector('.pre-order-button__availability-date') as HTMLDivElement;\n    }\n\n    setSettings(settings: ButtonPartSettings) {\n        this.settings = settings;\n        const { buttonStyle, hoverStyle } = this.getStyles();\n\n        this.buttonElement.setAttribute('style', buttonStyle);\n        this.hoverElement.setAttribute('style', hoverStyle);\n    }\n\n    setText(text: string) {\n        this.text = text;\n        this.buttonElement.innerText = text;\n        this.hoverElement.innerText = text;\n    }\n\n    setMessage(message: string) {\n        this.message = message;\n        this.messageElement.innerText = message;\n    }\n\n    private getStyles() {\n        const buttonStyle = getStylesString(this.settings?.button);\n        const hoverStyle = getStylesString(this.settings?.hover);\n        const availabilityDateStyle = 'margin-top: 1rem; font-size: 0.8em; text-align: inherit;'\n\n        return { buttonStyle, hoverStyle, availabilityDateStyle };\n    }\n\n    hide() {\n        this.element.style.display = \"none\";\n    }\n\n    display() {\n        this.element.style.display = this.mainDisplayStyle;\n    }\n\n    setAavailabilityDate(input?: string | null) {\n        let value = '';\n        if (input) {\n            const dateValue = new Date(input);\n            const year = dateValue.getFullYear();\n            let month: number | string = dateValue.getMonth() + 1;\n            let date: number | string = dateValue.getDate();\n\n            if (date < 10) {\n                date = '0' + date;\n            }\n            if (month < 10) {\n                month = '0' + month;\n            }\n            this.availabilityDate = `${month}/${date}/${year}`;\n            value = !this.availabilityDate ? '' : `Availability date: ${this.availabilityDate}`\n        }\n        this.availabilityDateElement.innerText = value;\n    }\n\n    private getPreorderButtonHtml = (\n        buttonText: string,\n        buttonMessage: string,\n        buttonStyle: string,\n        hoverStyle: string,\n        availabilityDateStyle: string,\n        availabilityDate?: string\n    ) =>\n        `<div class=\"${PreorderButton.mainCssClass} ${PreorderButton.mainCssClass}__hover ${PreorderButton.mainCssClass}__top\">\n                <button\n                    type=\"submit\"\n                >\n                    <span\n                        class=\"pre-order-button__self\"\n                        style=\"${buttonStyle}\"\n                    >\n                        ${buttonText}\n                    </span>\n                    <span\n                        class=\"pre-order-button__hover\"\n                        style=\"${hoverStyle}\"\n                    >\n                        ${buttonText}\n                    </span>\n                </button>\n                <span class=\"pre-order-button__message\">\n                    ${buttonMessage}\n                </span>\n                <div\n                 class=\"pre-order-button__availability-date\"\n                 style=\"${availabilityDateStyle}\"\n                 ></div>\n            </div>`;\n            \n    static isElementPreorderButton(el: HTMLButtonElement) {\n      return el.parentElement?.classList.contains(PreorderButton.mainCssClass);\n    }      \n}","import { ButtonPartSettings, getStylesString } from \"~../../../libs/utils\";\nimport { addStyleElement, logWithPrefix } from \"~utils/common/common\";\nimport preorderStyle from '../product-details/preorderStyle';\n\nexport class PreorderSpinner {\n    element!: HTMLSpanElement;\n    visible: boolean = false;\n\n    constructor(private settings?: ButtonPartSettings, private text = '{{PreOrderText}}', private message = '{{PreOrderMessage}}') {\n        this.render();\n        this.hide();\n    }\n\n    render() {\n        const placeholder = document.createElement('div');\n\n        placeholder.insertAdjacentHTML('beforeend', this.getSpinnerHtml());\n\n        this.element = placeholder.firstElementChild as HTMLDivElement;\n        // this.element.style.alignSelf = 'center';\n    }\n\n    hide() {\n        this.element.style.display = \"none\";\n        this.visible = false;\n    }\n\n    display(width?: string | null) {\n        this.element.style.display = \"flex\";\n        if (width) {\n            this.element.style.width = width;\n        }\n        this.visible = true;\n    }\n\n    private getSpinnerHtml = () =>\n        `<span class=\"pre-order-button__spinner Polaris-Spinner Polaris-Spinner--colorTeal Polaris-Spinner--sizeLarge\">\n            <svg viewBox=\"0 0 44 44\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M15.542 1.487A21.507 21.507 0 00.5 22c0 11.874 9.626 21.5 21.5 21.5 9.847 0 18.364-6.675 20.809-16.072a1.5 1.5 0 00-2.904-.756C37.803 34.755 30.473 40.5 22 40.5 11.783 40.5 3.5 32.217 3.5 22c0-8.137 5.3-15.247 12.942-17.65a1.5 1.5 0 10-.9-2.863z\">\n                </path>\n            </svg>\n        </span>`;\n}","import { sleep } from '~../../../libs/utils/async';\nimport { selectors } from '~common/constants/selectors';\nimport {\n    ButtonSettings,\n} from '~common/types';\nimport { logWithPrefix } from '~utils/common/common';\nimport { PreorderButton } from './PreorderButton';\nimport { PreorderSpinner } from '../common/PreorderSpinner';\nimport { ProductApiJson } from './services/ProductPageApiService';\nimport { ShopifyOptionSelectors } from './ShopifyOptionSelectors';\n\n\ninterface ThemesButtons {\n    items: Map<string, { ref: HTMLElement | null; style: string | null; selector: string; }>;\n    visible: boolean;\n    styleElement: HTMLElement | null;\n}\n\n\nexport class ProductForm {\n    element!: HTMLFormElement | null;\n    variantsSelectElement: HTMLSelectElement | null = null;\n    selectors: any;\n    displayOriginValue = 'block';\n    themesButtons: ThemesButtons = { items: new Map(), visible: false, styleElement: null };\n    themesButtonsWidth: string | null = null;\n    preorderButton!: PreorderButton;\n    settings: ButtonSettings | null = null;\n    spinner: PreorderSpinner;\n\n    constructor() {\n      let element = null;\n      for (const selector of selectors.product.form) {\n          element = document.querySelector<HTMLFormElement>(selector);\n          if (element) {\n            this.element = element;\n            break;\n          }\n      }\n      \n\n      this.addListners();\n\n      this.variantsSelectElement = this.element?.querySelector<HTMLSelectElement>(\n          selectors.product.variantsSelect.join(\",\")\n      ) ?? null;\n\n      if (this.element) {\n          this.displayOriginValue = window.getComputedStyle(\n              this.element\n          ).display;\n      }\n\n      this.preorderButton = new PreorderButton();\n      // this.setThemesButtons();\n\n      this.spinner = new PreorderSpinner();\n      this.element?.append(this.spinner.element);\n\n    }\n\n    addListners(product?: ProductApiJson) {\n        this.onClick(() => {\n            if (!this.themesButtons.visible) {\n                this.hideThemesButtons();\n            }\n        });\n\n        // this.element?.addEventListener('focusin', () => {\n        //     if (!this.themesButtons.visible) {\n        //         this.hideThemesButtons();\n        //     }\n        // }, true)\n\n        // this.onSelectProductVariant((e) => {\n\n        // })\n\n        // this.selectors = new window.Shopify.OptionSelectors(selectors.product.variantsSelectId, {\n        //     product,\n        //     onVariantSelected: this.onSelectProductVariant.bind(this),\n        //     enableHistoryState: true\n        // });\n\n        {\n            // const qwer = window.Shopify.OptionSelectors.prototype.updateSelectors;\n            // window.Shopify.OptionSelectors.prototype.updateSelectors = function (...args: any[]) {\n            //     debugger;\n            //     const optionSelectors = this;\n            //     qwer.apply(optionSelectors, args);\n            //     const id = optionSelectors.product.getVariant(optionSelectors.selectedValues());\n            //     console.log('Shopify.OptionSelectors.prototype.updateSelectors', id, optionSelectors);\n            // }\n        }\n    }\n\n    onClick(cb: (e: MouseEvent) => void) {\n        this.element?.addEventListener('click', cb);\n    }\n\n    onVariantChange(cb: (e: Event) => void) {\n        this.element?.addEventListener('change', e => cb(e));\n    }\n\n    // onSelectProductVariant(cb: (e: Event) => void) {\n    //     this.variantsSelectElement?.addEventListener('change', cb);\n    // }\n\n\n    setThemesButtons() {\n        if (this.element !== null) {\n            selectors.product.button.forEach((selector) => {\n              selectors.product.form.forEach((formSelector) => {\n                selector = `${formSelector} ${selector}`;\n                const element = this.element?.querySelector<HTMLButtonElement>(\n                    selector\n                );\n                // if (element) {\n                if (element && !this.themesButtons.items.has(selector)) {\n                    this.themesButtons.items.set(selector, {\n                        ref: element ?? null,\n                        style: element ? window.getComputedStyle(element).display : null,\n                        selector\n                    });\n                }\n                // }\n              });\n            });\n        }\n    }\n\n    get isExist() {\n        return Boolean(this.element);\n    }\n\n    appendPreorderButton() {\n        this.element?.append(this.preorderButton.element);\n    }\n\n    displayPreorderButton() {\n        this.preorderButton.display();\n    }\n\n    showThemesButtons() {\n        this.themesButtons.items.forEach((element) => {\n            // applyStyle(element.style, element.ref);\n            if (element?.ref && element.style) {\n                // elementToHide!.ref!.style!.display = 'none';\n                element.ref.style.display = element.style;\n            }\n        });\n        // this.removeThemesButtonsStyle();\n        this.themesButtons.visible = true;\n    }\n\n    hideThemesButtons() {\n        // const styles = [...this.themesButtons.items].map(({ selector }) => {\n        //     return { selector, rules: 'display: none !important;' };\n        // });\n        // this.createThemesButtonsStyle(styles);\n        this.setThemesButtons();\n\n        this.themesButtons.items.forEach((elementToHide) => {\n            // elementToHide.ref.setAttribute('style', 'display: none');\n            if (elementToHide?.ref) {\n                elementToHide!.ref!.style!.display = 'none';\n                if (this.themesButtonsWidth === null) {\n                    this.themesButtonsWidth = window.getComputedStyle(elementToHide.ref).width;\n                }\n            }\n        });\n\n        if (this.themesButtonsWidth) {\n            this.preorderButton.element.style.width = this.themesButtonsWidth;\n        }\n\n        this.themesButtons.visible = false;\n    }\n\n    async showSpinner() {\n        await sleep();\n        this.hideThemesButtons();\n        this.preorderButton.hide();\n\n        // this.spinner = new PreorderSpinner();\n        // this.element?.append(this.spinner.element);\n        this.spinner.display(this.themesButtonsWidth);\n    }\n\n    hideSpinner() {\n        // this.spinner?.element.parentElement?.removeChild(this.spinner?.element);\n        this.hideThemesButtons();\n        this.spinner.hide();\n    }\n\n    setPreorderButtonSettings(settings: ButtonSettings) {\n        this.settings = settings;\n        this.preorderButton.setSettings(settings.design_settings);\n        this.preorderButton.setText(settings.text);\n        this.preorderButton.setMessage(settings.message);\n    }\n\n    triggerVariantChangeSync() {\n        this.element?.querySelector('select')?.dispatchEvent(new Event('change', { 'bubbles': true }));\n    }\n\n    getSelectedVariantId() {\n        return this.variantsSelectElement?.value;\n    }\n\n    // removeThemesButtonsStyle() {\n    //     this.themesButtons.styleElement?.parentNode?.removeChild(this.themesButtons.styleElement);\n    //     this.themesButtons.styleElement = null;\n    // }\n\n    // createThemesButtonsStyle(items: { selector: string; rules: string; }[]) {\n    //     if (this.themesButtons.styleElement) {\n    //         return;\n    //     }\n    //     const style = document.createElement('style');\n    //     items.forEach(({ selector, rules }) => {\n    //         style.innerHTML += `${selector} { ${rules} }`;\n    //     });\n\n    //     style.innerHTML += ` div.${this.preorderButton.mainCssClass} button[type=\"submit\"] { display: ${this.preorderButton.mainDisplayStyle} !important;}`;\n\n    //     this.element?.appendChild(style);\n    //     this.themesButtons.styleElement = style;\n    // }\n\n\n\n}\n","import { PreorderSettings, PreorderStatus } from '~common/types';\nimport { LocationApi, LogFn } from '~utils/common/common';\nimport { PreorderError } from '~utils/common/errors';\nimport { ProductForm } from './ProductForm';\nimport {\n    ProductApiJson,\n    ProductPageApiService,\n} from './services/ProductPageApiService';\nimport { ShopifyOptionSelectors, Variant } from './ShopifyOptionSelectors';\n\n// declare global {\n//  const ShopifyConst: { shop: string, OptionSelectors: any };\n// }\nexport class ProductPageController {\n    productForm!: ProductForm;\n    product: ProductApiJson | null = null;\n    settings: PreorderSettings | null = null;\n    shopifyOptionSelectors!: ShopifyOptionSelectors;\n\n    private selectedVariant: Variant | null = null;\n\n    constructor(\n        private log: LogFn,\n        private productApiService: ProductPageApiService\n    ) {\n        debugger;\n        this.log = log.bind(null, ProductPageController.name, ':: ');\n        this.init().catch((error) => this.log('Init Error:: ', error));\n    }\n\n    async init() {\n        this.productForm = new ProductForm();\n\n        if (this.productForm.isExist) {\n            this.log('product form is on the page');\n            // this.productForm.hideThemesButtons();\n\n            // const callbacks: Callbacks = {\n            //     onVariantChange: (variant) => this.loadSettings(variant).catch(this.fallbackForCatchError)\n            // };\n            this.productForm.triggerVariantChangeSync();\n\n            this.productForm.onClick(() => {\n                setTimeout(() => {\n                    const selectedVariantId = this.productForm.getSelectedVariantId();\n                    if (this.selectedVariant?.option1 !== selectedVariantId) {\n                        this.setSelectedVariant(selectedVariantId);\n                        this.productForm.triggerVariantChangeSync();\n                    }\n                });\n\n            })\n\n            this.productForm.onVariantChange((e) => {\n                this.setSelectedVariant(\n                    (e?.target as HTMLSelectElement)?.value\n                );\n                this.loadSettings().catch(this.fallbackForCatchError);\n            });\n\n            this.productForm.showSpinner();\n            try {\n                await this.loadProduct();\n\n                await this.loadSettings();\n            } catch (error) {\n                this.fallbackForCatchError(error);\n            }\n            \n            this.productForm.element?.dispatchEvent(new Event(\"click\"));\n            // new window.Shopify.OptionSelectors(\"Option-product-0\", { product: this.product, onVariantSelected: (v: any) => console.log('onVariantSelected', v) });\n            // this.shopifyOptionSelectors = new ShopifyOptionSelectors(this.log, callbacks);\n            // this.shopifyOptionSelectors.init();\n\n            // this.product = this.shopifyOptionSelectors.product;\n            // this.productForm.addListners(this.product!);\n        } else {\n            const error = 'product form is not on the page';\n            this.log(error);\n            throw new PreorderError(error);\n        }\n    }\n\n    fallbackForCatchError = ((error: any) => {\n        this.productForm.hideSpinner();\n        console.error('LOAD ERROR', error);\n        this.productForm.showThemesButtons();\n    }).bind(this);\n\n    async loadProduct() {\n        const product = await this.productApiService.loadProduct();\n\n        this.product = product;\n        this.setSelectedVariant();\n    }\n\n    setSelectedVariant(selectValue?: string) {\n        const selectedVariant = this.product?.variants?.find(\n            (variant) => (variant as any).option1 === selectValue\n        );\n        const variantId =\n            LocationApi.urlParam('variant') || this.product?.variants?.[0]?.id;\n        this.selectedVariant =\n            (selectedVariant ||\n                this.product?.variants.find(\n                    (v) => String(v.id) === String(variantId)\n                )) ??\n            null;\n    }\n\n    async loadSettings(selectedVariant?: Variant) {\n        this.productForm.showSpinner();\n\n        if (selectedVariant) {\n            this.selectedVariant = selectedVariant;\n        }\n\n        await this.getSettings(this.selectedVariant?.id);\n\n        this.productForm.hideSpinner();\n\n        if (\n            this.settings?.variant.preorder_status === PreorderStatus.Activated\n        ) {\n            this.productForm.appendPreorderButton();\n            this.productForm.displayPreorderButton();\n        } else {\n            this.productForm.showThemesButtons();\n        }\n    }\n\n    async getSettings(variant_id?: number) {\n        if (this.product === null && !variant_id) {\n            return await Promise.resolve(null);\n        }\n\n        const settings = await this.productApiService.loadSettings(\n            window.Shopify.shop,\n            String(variant_id!)\n        );\n\n        this.productForm.setPreorderButtonSettings({\n            text: settings?.button.text ?? '',\n            message: settings?.button.message ?? '',\n            design_settings: settings?.button.design_settings.current.preorder!,\n        });\n\n        this.productForm.preorderButton.setAavailabilityDate(\n            settings?.variant.availability_date\n        );\n\n        this.settings = {\n            ...this.settings,\n            variant: settings?.variant!,\n        };\n    }\n}\n","declare const Shopify: any;\nimport { logWithPrefix } from '../utils/common/common';\nimport { PreorderApi } from '~common/types';\nimport {\n    MockProductPageApiService,\n    ProductPageApiService,\n} from './services/ProductPageApiService';\nimport { ProductPageController } from './ProductPageController';\nimport { IS_MOCK } from '~index';\n\n// let apiHost = process.env.REACT_APP_API_HOST!;\n// if (apiHost.endsWith('/')) {\n//     apiHost = apiHost.slice(0, -1);\n// }\n\n// const baseURL = apiHost + '/api';\n\n// const preorderApi = {\n//     url: baseURL\n// }\n\n// type PreorderApi = typeof preorderApi;\n\n// , function(t, e, n) {\n//     \"use strict\";\n//     e.__esModule = !0,\n//     e.productFormSelectors = ['form[action$=\"/cart/add\"]', 'form[action$=\"/cart/add/\"]', 'form[action$=\"/cart/add.js\"]'],\n//     e.addToCartButtonSelectors = [\".addtocart\", \".product-menu-buttons-addtocart .product-menu-button\", \".product-menu-button.product-menu-button-atc\", '.add-to-cart [type=\"button\"]', \"button.product-submit\", \".btn\", '[type=\"submit\"] span span', \".addtocart\", \"div.submit button\", '[type=\"submit\"]'],\n//     e.quantityInputSelectors = ['[name=\"quantity\"]'],\n//     e.customVariantInputSelectors = [\".selection-wrapper.variant.radio.js\", \".swatch\"],\n//     e.variantInputSelectors = ['[name=\"id\"]', '[name=\"id[]\"]'],\n//     e.dynamicCheckoutSelectors = ['[data-shopify=\"payment-button\"]'],\n//     e.cartFormSelectors = ['form[action*=\"/cart\"]'],\n//     e.updateButtonSelectors = ['[name=\"update\"]'],\n//     e.checkoutButtonSelectors = ['[name=\"checkout\"]', \".checkout-button.button.alt.wc-forward\"],\n//     e.updateInputSelectors = [\".cart-item-column:not(.cart-item-column-mobile) .quantity-input\", '[name^=\"updates[\"]'],\n//     e.noteInputSelectors = ['[name=\"note\"]']\n// }\n\nexport async function init(preorderApi: PreorderApi) {\n    const logInit = logWithPrefix('product.init():: ');\n    logInit('Shopify object', Shopify);\n    // alert('This is Product Details Page 1');\n\n    const ProductPageApiServiceClass = !IS_MOCK\n        ? ProductPageApiService\n        : MockProductPageApiService;\n    const productApiService = new ProductPageApiServiceClass(\n        logWithPrefix(),\n        preorderApi\n    );\n    const controller = new ProductPageController(\n        logWithPrefix(),\n        productApiService\n    );\n}\n"]}